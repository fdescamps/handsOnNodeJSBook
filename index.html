<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>WebSockets - Simple chat</title>

  <style>
  * { font-family:tahoma; font-size:12px; padding:0px; margin:0px; }
  p { line-height:18px; }
  div { width:500px; margin-left:auto; margin-right:auto;}
  #content { padding:5px; background:#ddd; border-radius:5px; overflow-y: scroll;
    border:1px solid #CCC; margin-top:10px; height: 160px; }
    #input { border-radius:2px; border:1px solid #ccc;
      margin-top:10px; padding:5px; width:400px; }
      #status { width:88px; display:block; float:left; margin-top:15px; }
      </style>

      <script type="text/javascript">
      $(function () {
        // if user is running mozilla then use it's built-in WebSocket
        window.WebSocket = window.WebSocket || window.MozWebSocket;

        var connection = new WebSocket('ws://127.0.0.1:1337');

        connection.onopen = function () {
          // connection is opened and ready to use
        };

        connection.onerror = function (error) {
          // an error occurred when sending/receiving data
        };

        connection.onmessage = function (message) {
          // try to decode json (I assume that each message from server is json)
          try {
            var json = JSON.parse(message.data);
          } catch (e) {
            console.log('This doesn\'t look like a valid JSON: ', message.data);
            return;
          }
          // handle incoming message
        };
      });
      </script>
    </head>
    <body>
      <div id="content"></div>
      <div>
        <span id="status">Connecting...</span>
        <input type="text" id="input" disabled="disabled" />
      </div>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script src="./frontend.js"></script>
    </body>
    </html>
